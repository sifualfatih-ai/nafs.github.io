<!-- Tambahkan di dalam <body> halaman kamu -->
<section style="max-width:680px;margin:20px auto;font-family:system-ui;">
  <h2>Uji Gemini via api.nafsflow.com</h2>
  <textarea id="prompt" rows="4" style="width:100%;">tuliskan pantun satu bait</textarea>
  <br/>
  <button id="btn" style="padding:8px 14px;margin-top:8px;">Kirim</button>
  <pre id="out" style="white-space:pre-wrap;background:#f5f5f5;padding:10px;border-radius:8px;margin-top:12px;"></pre>
</section>

<script>
  const API_BASE = "https://api.nafsflow.com";

  async function askGemini(promptText) {
    const r = await fetch(`${API_BASE}/generate`, {
      method: "POST",
      headers: { "Content-Type": "application/json" },
      body: JSON.stringify({ prompt: promptText })
    });
    if (!r.ok) throw new Error(`HTTP ${r.status}`);
    const data = await r.json();

    // Ambil teksnya dari struktur respons Gemini:
    const text =
      data?.candidates?.[0]?.content?.parts?.[0]?.text ||
      JSON.stringify(data, null, 2);
    return text;
  }

  document.getElementById("btn").onclick = async () => {
    const out = document.getElementById("out");
    out.textContent = "Sebentar...";
    try {
      const prompt = document.getElementById("prompt").value;
      const text = await askGemini(prompt);
      out.textContent = text;
    } catch (e) {
      out.textContent = "Error: " + e.message;
    }
  };
</script>
